---
title: "オレシカナイト16の配信構成"
featured_image: "/images/oreshika_16.png"
images: ["/images/oreshika_16.png"]
description: "オレシカナイトvol16の配信構成について話します"
date: 2021-12-12T12:35:48+09:00
categories: "Tech"
tags: ["オレシカナイト","OBS"]
---

# はじめに
皆さんこんにちは、なんとかジム通いを続けられているyoutangaiです。最近トレーニングにメニューにスクワットが追加されてめちゃめちゃきついですが、そのきつさに気持ちよさを感じ始めてきました。

この記事は、サイバーエージェントメディア事業部の広告横軸組織PTA([twitter](https://twitter.com/PTA_CyberAgent))の[アドベントカレンダー](https://adventar.org/calendars/6450)12日目の記事となります。よろしくお願い致します。

# オレシカナイト
PTAではだいたい3ヶ月に1回のペースで、アドテク勉強会「オレシカナイト」を実施しております。コロナ前まではオフラインで実施していたのですが、2020年7月に開催したVol13からYoutube上でオンライン配信する形式に変更しました。それから4回オンラインで勉強会を実施し、Vol16では様々な工夫ができるほど経験が溜まってきました。今回の記事では、Vol16配信の構成と工夫について述べます。ちなみに、オレシカナイトVol16のアーカイブは[こちら](https://youtube.com/playlist?list=PLBsO-IAhmMUUw5_3PTQ7L0kfcnzhogpR_)にあるので、ぜひご覧ください。

# 配信画面
結論から述べると、配信画面は下図のようになっています。発表者(右側の人)と司会者(左側の人)が対話しているような画面になっております(オレンジ色の枠です)。また、発表者のスライドが画面の中央に配置されており、視聴者や司会者からの質問に対する回答のスライドを表示することができます(赤色の枠です)。
![画面構成](/images/oreshika_16/stream_screen_struct.png)

# 機材構成
配信は[OBS](https://obsproject.com/ja)という配信のアプリケーションで行っております。OBSに取り込む入力は以下のリストになります。
- 映像
  - 司会者の映像
  - 発表者の映像
  - 発表者のスライドの映像
- 音声
  - 司会者&発表者のマイクの音声

これらのデータをOBSに取り込むための構成は下図の様になっております。
![配信構成](/images/oreshika_16/stream_structure.jpg)
まず、マイクの音声と発表者スライドの取り込みについてです。これらのデータは会社から貸し出されている`Roland VR-4HD`にて取り込みます。マイクの音声は、赤白のオーディオケーブルからRolandに取り込みます。発表者のスライドはHDMIケーブルでRolandに取り込みます。Rolandからの情報はOBSに映像と音声が別々に取り込まれます。

続いて、司会者と発表者の映像取り込みについてです。これらのデータはRolandから取り込むことも可能だったのですが、Roland側でスライドと合成された形でしか取り込めません。スライドと司会者&発表者の映像はOBS上で切り離して取り込みたかったので、`MiraBox VideoCapture`を用意しそこから取り込みました。余談ですが、2つのVideoCaptureは私物を利用しております。

# OBS
ここからは取り込んだ情報(映像と音声)の加工についてです。OBSでは取り込んだ映像と音声にフィルタをかけて配信にのせることが可能です。
## 音声
音声の加工は大きく下記2つです。
1. 音量の増幅
1. ノイズの低減

配信のテスト時にOBSに取り込んだ音声を確認すると、他の一般的なYouTube上の動画に比べて音量が小さいことがわかりました。そこで、OBS上のフィルタ`ゲイン`を作成し`27.4dB`を設定しました。これで、入力される音声を増幅して配信にのせることができました。
![ゲインフィルタ](/images/oreshika_16/filter_gain.png)

しかし、その場合マイクから入ったノイズも増幅されてしまいます。これを回避するために、`ノイズ抑制`フィルタを作成し`RNNoise(高品質、より多くのCPU使用率)`を設定しました。
![ノイズ抑制フィルタ](/images/oreshika_16/filter_noise.png)

## 映像
司会者&発表者の後ろにはグリーンバックが設置してあります。そのため、人物の周りは緑色になって映像として取り込まれます。そこで`クロマキーフィルタ`を利用することで、人物のみを切り抜くことができます。下記のような映像(今回はフリー素材で代替します)に対して`クロマキーフィルタ`をかけると...
![ハートの手](/images/oreshika_16/green_heart.png)

こうなります。
![ハートの手クロマキー](/images/oreshika_16/green_heart_filter.png)

# おわりに
以上が、オレシカナイトVol16における配信構成とOBSでの加工(フィルタ)の説明になります。もし、オンラインでの勉強会などを考えている方々に少しでも有益な情報を提供できていれば嬉しいです。OBSは使ってみるとそこまで難しくないと思います。

繰り返しになりますが、オレシカナイトVol16のアーカイブは[こちら](https://youtube.com/playlist?list=PLBsO-IAhmMUUw5_3PTQ7L0kfcnzhogpR_)にあるので、ぜひご覧ください。